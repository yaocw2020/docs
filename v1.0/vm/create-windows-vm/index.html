<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v1.0 plugin-docs plugin-id-default docs-doc-id-vm/create-windows-vm">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Create a Windows Virtual Machine | Harvester</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.harvesterhci.io/v1.0/vm/create-windows-vm"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v1.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.0"><meta data-rh="true" name="docsearch:version" content="v1.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.0"><meta data-rh="true" property="og:title" content="Create a Windows Virtual Machine | Harvester"><meta data-rh="true" name="description" content="Create one or more virtual machines from the Virtual Machines page."><meta data-rh="true" property="og:description" content="Create one or more virtual machines from the Virtual Machines page."><meta data-rh="true" name="keywords" content="Harvester,harvester,Rancher,rancher,Windows,windows,Virtual Machine,virtual machine,Create a Windows VM"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.harvesterhci.io/v1.0/vm/create-windows-vm"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.0/vm/create-windows-vm" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/zh/v1.0/vm/create-windows-vm" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.0/vm/create-windows-vm" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://U7QCSJFCWR-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Harvester" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.831dbdae.css">
<link rel="preload" href="/assets/js/runtime~main.693e3b15.js" as="script">
<link rel="preload" href="/assets/js/main.d1ef793e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/v1.0/">v1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dev/vm/create-windows-vm">v1.2-dev</a></li><li><a class="dropdown__link" href="/v1.1/vm/create-windows-vm">v1.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v1.0/vm/create-windows-vm">v1.0</a></li><li><a class="dropdown__link" href="/v0.3/">v0.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v1.0/vm/create-windows-vm" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/v1.0/vm/create-windows-vm" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v1.0/">Docs</a><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__blog">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://harvesterhci.io/kb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__kb">Knowledge Base<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/">Harvester Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.0/install/requirements">Installation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/airgap">Air Gapped Environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.0/upgrade/automatic">Upgrade</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/upload-image">Upload Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/host/">Host Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/v1.0/vm/create-vm">VM Management</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.0/vm/create-vm">Create a Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v1.0/vm/create-windows-vm">Create a Windows Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.0/vm/edit-vm">Edit a Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.0/vm/access-to-the-vm">Access to the Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.0/vm/backup-restore">VM Backup &amp; Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.0/vm/live-migration">Live Migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.0/vm/hotplug-volume">Hot-Plug Volumes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.0/vm/resource-overcommit">Resource Overcommit</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.0/networking/harvester-network">Networking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/monitoring/">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.0/rancher/rancher-integration">Rancher Integration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/terraform/">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/settings/">Settings</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.0/troubleshooting/installation">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.0/faq">FAQ</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div><div><b>Harvester</b> <b>v1.0</b> is EOL and this documentation is no longer actively maintained. For more details, refer to the <a href="https://www.suse.com/suse-harvester/support-matrix/all-supported-versions/"><b>SUSE support matrix</b></a>.</div></div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/v1.1/vm/create-windows-vm">latest version</a></b> (<!-- -->v1.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">VM Management</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Create a Windows Virtual Machine</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Create a Windows Virtual Machine</h1></header><p>Create one or more virtual machines from the <strong>Virtual Machines</strong> page.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>For creating Linux virtual machines, please refer to <a href="/v1.0/vm/create-vm">this page</a>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-create-a-windows-vm">How to Create a Windows VM<a href="#how-to-create-a-windows-vm" class="hash-link" aria-label="Direct link to How to Create a Windows VM" title="Direct link to How to Create a Windows VM">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="header-section">Header Section<a href="#header-section" class="hash-link" aria-label="Direct link to Header Section" title="Direct link to Header Section">​</a></h3><ol><li>Create a single VM instance or multiple VM instances.</li><li>Set the VM name.</li><li>(Optional) Provide a description for the VM.</li><li>(Optional) Select the VM template <code>windows-iso-image-base-template</code>. This template will add a volume with the <code>virtio</code> drivers for Windows.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basics-tab">Basics Tab<a href="#basics-tab" class="hash-link" aria-label="Direct link to Basics Tab" title="Direct link to Basics Tab">​</a></h3><ol><li>Configure the number of <code>CPU</code> cores assigned to the VM.</li><li>Configure the amount of <code>Memory</code> assigned to the VM.</li><li>(Optional) Select existing <code>SSH keys</code> or upload new ones.</li></ol><p><img loading="lazy" alt="create-windows-vm" src="/assets/images/create-windows-vm-bd4beb4bebfe8c490ddd02d838760d56.png" width="1920" height="1080" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>As mentioned above, it is recommended that you use the Windows VM template. The <code>Volumes</code> section will describe the options which the Windows VM template created automatically.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>The <code>bootOrder</code> values need to be set with the installation image first. If you change it, your VM might not boot into the installation disk.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="volumes-tab">Volumes Tab<a href="#volumes-tab" class="hash-link" aria-label="Direct link to Volumes Tab" title="Direct link to Volumes Tab">​</a></h3><ol><li>The <strong>first volume</strong> is an <code>Image Volume</code> with the following values: <ol><li><code>Name</code>: The value <code>cdrom-disk</code> is set by default. You can keep it or change it.</li><li><code>Image</code>: Select the Windows image to be installed. See <a href="/v1.0/upload-image">Upload Images</a> for the full description on how to create new images.</li><li><code>Type</code>: Select <code>cd-rom</code>.</li><li><code>Size</code>: The value <code>20</code> is set by default. You can change it if your image has a bigger size.</li><li><code>Bus</code>: The value <code>SATA</code> is set by default. It&#x27;s recommended you don&#x27;t change it.</li></ol></li><li>The <strong>second volume</strong> is a <code>Volume</code> with the following values:<ol><li><code>Name</code>: The value <code>rootdisk</code> is set by default. You can keep it or change it.</li><li><code>Size</code>: The value <code>32</code> is set by default. See the disk space requirements for <a href="https://docs.microsoft.com/en-us/windows-server/get-started/hardware-requirements#storage-controller-and-disk-space-requirements" target="_blank" rel="noopener noreferrer">Windows Server</a> and <a href="https://docs.microsoft.com/en-us/windows/whats-new/windows-11-requirements#hardware-requirements" target="_blank" rel="noopener noreferrer">Windows 11</a> before changing this value.</li><li><code>Bus</code>: The value <code>VirtIO</code> is set by default. You can keep it or change it to the other available options, <code>SATA</code> or <code>SCSI</code>.</li></ol></li><li>The <strong>third volume</strong> is a <code>Container</code> with the following values:<ol><li><code>Name</code>: The value <code>virtio-container-disk</code> is set by default. You can keep it or change it.</li><li><code>Docker Image</code>: The value <code>registry.suse.com/suse/vmdp/vmdp:2.5.3</code> is set by default. It&#x27;s recommended you don&#x27;t change it.</li><li><code>Bus</code>: The value <code>SATA</code> is set by default. It&#x27;s recommended you don&#x27;t change it.</li></ol></li><li>You can add additional disks using the buttons <code>Add Volume</code>, <code>Add Existing Volume</code>, <code>Add VM Image</code>, or <code>Add Container</code>.</li></ol><p><img loading="lazy" alt="create-windows-vm-volumes" src="/assets/images/create-windows-vm-volumes-b654694515256a1d4a14655cc5241b90.png" width="1920" height="1080" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="networks-tab">Networks Tab<a href="#networks-tab" class="hash-link" aria-label="Direct link to Networks Tab" title="Direct link to Networks Tab">​</a></h3><ol><li>The <strong>Management Network</strong> is added by default with the following values: <ol><li><code>Name</code>:  The value <code>default</code> is set by default. You can keep it or change it.</li><li><code>Network</code>: The value <code>management Network</code> is set by default. You can&#x27;t change this option if no other network has been created. See <a href="/v1.0/networking/harvester-network">Harvester Network</a> for the full description on how to create new networks.</li><li><code>Model</code>: The value <code>e1000</code> is set by default. You can keep it or change it to the other available options from the dropdown.</li><li><code>Type</code>: The value <code>masquerade</code> is set by default. You can keep it or change it to the other available option, <code>bridge</code>.</li></ol></li><li>You can add additional networks by clicking  <code>Add Network</code>.</li></ol><p><img loading="lazy" alt="create-windows-vm-networks" src="/assets/images/create-windows-vm-networks-1a29d10728925ba8f4edc495d26a7421.png" width="1920" height="1080" class="img_ev3q"></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Changing the <code>Node Scheduling</code> settings can impact Harvester features, such as disabling <code>Live migration</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-scheduling-tab">Node Scheduling Tab<a href="#node-scheduling-tab" class="hash-link" aria-label="Direct link to Node Scheduling Tab" title="Direct link to Node Scheduling Tab">​</a></h3><ol><li><code>Node Scheduling</code> is set to <code>Run VM on any available node</code> by default. You can keep it or change it to the other available options from the dropdown.</li></ol><p><img loading="lazy" alt="create-windows-vm-scheduling" src="/assets/images/create-windows-vm-scheduling-ffa18f9b5afd614db7aa8a50082f827e.png" width="1920" height="1080" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-options-tab">Advanced Options Tab<a href="#advanced-options-tab" class="hash-link" aria-label="Direct link to Advanced Options Tab" title="Direct link to Advanced Options Tab">​</a></h3><ol><li><code>OS Type</code>: The value <code>Windows</code> is set by default. It&#x27;s recommended you don&#x27;t change it.</li><li><code>Machine Type</code>: The value <code>None</code> is set by default. It&#x27;s recommended you don&#x27;t change it. See the <a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#machine-type" target="_blank" rel="noopener noreferrer">KubeVirt Machine Type</a> documentation before you change this value.</li><li>(Optional) <code>Hostname</code>: Set the VM hostname.</li><li>(Optional) <code>Cloud Config</code>: Both <code>User Data</code> and <code>Network Data</code> values are set with default values. Currently, these configurations are not applied to Windows-based VMs.</li></ol><p><img loading="lazy" alt="create-windows-vm-advanced" src="/assets/images/create-windows-vm-advanced-c8455fc5cdf66e23baf842adb44de30b.png" width="1920" height="1080" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="footer-section">Footer Section<a href="#footer-section" class="hash-link" aria-label="Direct link to Footer Section" title="Direct link to Footer Section">​</a></h3><ol><li><code>Start virtual machine on creation</code>: This option is checked by default. You can uncheck it if you don&#x27;t want the VM to start once it&#x27;s created.</li></ol><p>Once all the settings are in place, click on <code>Create</code> to create the VM.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If you need to add advanced settings, you can edit the VM configuration directly by clicking on <code>Edit as YAML</code>.
And if you want to cancel all changes made, click <code>Cancel</code>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-of-windows">Installation of Windows<a href="#installation-of-windows" class="hash-link" aria-label="Direct link to Installation of Windows" title="Direct link to Installation of Windows">​</a></h2><ol><li><p>Select the VM you just created, and click <code>Start</code> to boot up the VM.(If you checked <code>Start virtual machine on creation</code> the VM will start automatically once it&#x27;s created)</p></li><li><p>Boot into the installer, and follow the instructions given by the installer.</p></li><li><p>(Optional) If you are using <code>virtio</code> based volumes, you will need to load the specific driver to allow the installer to detect them. If you&#x27;re using VM template <code>windows-iso-image-base-template</code>, the instruction is as follows:</p><ol><li>Click on <code>Load driver</code>, and then click <code>Browse</code> on the dialog box, and find a CD-ROM drive with a <code>VMDP-WIN</code> prefix. Next, find the driver directory according to the Windows version you&#x27;re installing; for example, Windows Server 2012r2 should expand <code>win8.1-2012r2</code> and choose the <code>pvvx</code> directory inside.
<img loading="lazy" alt="find-virtio-driver-directory" src="/assets/images/find-virtio-driver-directory-5be0d2673d0b8c1c34d87a6962da065f.png" width="477" height="384" class="img_ev3q"></li><li>Click <code>OK</code> to allow the installer to scan this directory for drivers, choose <code>SUSE Block Driver for Windows</code>, and click <code>Next</code> to load the driver.
<img loading="lazy" alt="select-virtio-block-driver" src="/assets/images/select-virtio-block-driver-d72f63b4b89cb0c8fe7b4b8b9eb9971b.png" width="656" height="498" class="img_ev3q"></li><li>Wait for the installer to load up the driver. If you choose the correct driver version the <code>virtio</code> volumes will be detected once the driver is loaded.
<img loading="lazy" alt="installer-found-virtio-drive" src="/assets/images/installer-found-virtio-drive-09000201fe0e2d95e1aec7e2a84e35b3.png" width="641" height="485" class="img_ev3q"></li></ol></li><li><p>(Optional) If you are using other <code>virtio</code> based hardware like network adapter, you will need to install those drivers manually after completing the installation. To install drivers, open the VMDP driver disk, and use the installer based on your platform.</p></li></ol><p>The support matrix of VMDP driver pack for Windows are as follows (assume the VMDP CD-ROM drive path is E):</p><table><thead><tr><th align="center">Version</th><th align="center">Supported</th><th align="left">Driver path</th></tr></thead><tbody><tr><td align="center">Windows 7</td><td align="center">No</td><td align="left"><code>N/A</code></td></tr><tr><td align="center">Windows Server 2008</td><td align="center">No</td><td align="left"><code>N/A</code></td></tr><tr><td align="center">Windows Server 2008r2</td><td align="center">No</td><td align="left"><code>N/A</code></td></tr><tr><td align="center">Windows 8 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8-2012\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2012 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8-2012\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows 8.1 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8.1-2012r2\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2012r2 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win8.1-2012r2\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows 10 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-server\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2016 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-server\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2019 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-server\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows 11 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-2004\x86(x64)\pvvx</code></td></tr><tr><td align="center">Windows Server 2022 x86(x64)</td><td align="center">Yes</td><td align="left"><code>E:\win10-2004\x86(x64)\pvvx</code></td></tr></tbody></table><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If you didn&#x27;t use the <code>windows-iso-image-base-template</code> template, and you still need <code>virtio</code> devices, please make sure to add your custom Windows virtio driver to allow it to detect the hardware correctly.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="known-issues">Known Issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known Issues" title="Direct link to Known Issues">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows-iso-unable-to-boot-when-using-efi-mode">Windows ISO unable to boot when using EFI mode<a href="#windows-iso-unable-to-boot-when-using-efi-mode" class="hash-link" aria-label="Direct link to Windows ISO unable to boot when using EFI mode" title="Direct link to Windows ISO unable to boot when using EFI mode">​</a></h3><p>When using EFI mode with Windows, you may find the system booted with other devices like HDD or UEFI shell like the one below:</p><p><img loading="lazy" alt="efi-shell" src="/assets/images/efi-shell-830d79cf172af786bad73c8dc479fe31.png" width="800" height="608" class="img_ev3q"></p><p>That&#x27;s because Windows will prompt a <code>Press any key to boot from CD or DVD...</code> to let the user decide whether to boot from the installer ISO or not, and it needs human intervention to allow the system to boot from CD or DVD.</p><p><img loading="lazy" alt="boot-from-cd" src="/assets/images/boot-from-cd-5d0271f20ded1ac63970bc78f9da9ec5.png" width="818" height="621" class="img_ev3q"></p><p>Alternately if the system has already booted into the UEFI shell, you can type in <code>reset</code> to force the system to reboot again. Once the prompt appears you can press any key to let system boot from Windows ISO.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vm-crashes-when-reserved-memory-not-enough">VM crashes when reserved memory not enough<a href="#vm-crashes-when-reserved-memory-not-enough" class="hash-link" aria-label="Direct link to VM crashes when reserved memory not enough" title="Direct link to VM crashes when reserved memory not enough">​</a></h3><p>There is a known issue with Windows VM when it is allocated more than 8GiB without enough reserve memory configured. The VM crashes without warning.</p><p>This can be fixed by allocating at least 256MiB of reserved memory to the template on the Advanced Options tab.</p><p><img loading="lazy" alt="reserved-memory-config" src="/assets/images/reserved-memory-config-e07eb981514d4cc4b8a00e43acfaaa71.png" width="1244" height="501" class="img_ev3q"></p><p>We will add a default 256MiB of reserved memory to the Windows template to prevent this problem in the future release.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bsod-blue-screen-of-death-at-first-boot-time-of-windows">BSoD (Blue Screen of Death) at first boot time of Windows<a href="#bsod-blue-screen-of-death-at-first-boot-time-of-windows" class="hash-link" aria-label="Direct link to BSoD (Blue Screen of Death) at first boot time of Windows" title="Direct link to BSoD (Blue Screen of Death) at first boot time of Windows">​</a></h3><p>There is a known issue with Windows VM using Windows Server 2016 and above, a BSoD with error code <code>KMODE_EXCEPTION_NOT_HANDLED</code> may appears at the first boot time of Windows. We are still looking into it and will fix this issue in the future release.</p><p>As a workaround, you can create or modify the file <code>/etc/modprobe.d/kvm.conf</code> within the installation of Harvester by updating <code>/oem/99_custom.yaml</code> like below:</p><div class="language-YAML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-YAML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name: Harvester Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stages:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  initramfs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - commands: # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    files:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - path: /etc/modprobe.d/kvm.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      permissions: 384</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      owner: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      group: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      content: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          options kvm ignore_msrs=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      encoding: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ownerstring: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This is still an experimental solution. For more information, please refer to <a href="https://github.com/harvester/harvester/issues/276" target="_blank" rel="noopener noreferrer">this issue</a> and please let us know if you have encountered any issues after applying this workaround.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harvester/docs/edit/main/versioned_docs/version-v1.0/vm/create-windows-vm.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-11-25T02:18:22.000Z">Nov 25, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v1.0/vm/create-vm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create a Virtual Machine</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v1.0/vm/edit-vm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Edit a Virtual Machine</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-create-a-windows-vm" class="table-of-contents__link toc-highlight">How to Create a Windows VM</a><ul><li><a href="#header-section" class="table-of-contents__link toc-highlight">Header Section</a></li><li><a href="#basics-tab" class="table-of-contents__link toc-highlight">Basics Tab</a></li><li><a href="#volumes-tab" class="table-of-contents__link toc-highlight">Volumes Tab</a></li><li><a href="#networks-tab" class="table-of-contents__link toc-highlight">Networks Tab</a></li><li><a href="#node-scheduling-tab" class="table-of-contents__link toc-highlight">Node Scheduling Tab</a></li><li><a href="#advanced-options-tab" class="table-of-contents__link toc-highlight">Advanced Options Tab</a></li><li><a href="#footer-section" class="table-of-contents__link toc-highlight">Footer Section</a></li></ul></li><li><a href="#installation-of-windows" class="table-of-contents__link toc-highlight">Installation of Windows</a></li><li><a href="#known-issues" class="table-of-contents__link toc-highlight">Known Issues</a><ul><li><a href="#windows-iso-unable-to-boot-when-using-efi-mode" class="table-of-contents__link toc-highlight">Windows ISO unable to boot when using EFI mode</a></li><li><a href="#vm-crashes-when-reserved-memory-not-enough" class="table-of-contents__link toc-highlight">VM crashes when reserved memory not enough</a></li><li><a href="#bsod-blue-screen-of-death-at-first-boot-time-of-windows" class="table-of-contents__link toc-highlight">BSoD (Blue Screen of Death) at first boot time of Windows</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 harvesterhci.io</div></div></div></footer></div>
<script src="/assets/js/runtime~main.693e3b15.js"></script>
<script src="/assets/js/main.d1ef793e.js"></script>
</body>
</html>