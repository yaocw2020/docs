<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v1.1 plugin-docs plugin-id-default docs-doc-id-upgrade/v1-0-3-to-v1-1-1">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Upgrade from v1.0.3/v1.1.0 to v1.1.1 | Harvester</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.harvesterhci.io/v1.1/upgrade/v1-0-3-to-v1-1-1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v1.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.1"><meta data-rh="true" name="docsearch:version" content="v1.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.1"><meta data-rh="true" property="og:title" content="Upgrade from v1.0.3/v1.1.0 to v1.1.1 | Harvester"><meta data-rh="true" name="description" content="General information"><meta data-rh="true" property="og:description" content="General information"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.harvesterhci.io/v1.1/upgrade/v1-0-3-to-v1-1-1"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.1/upgrade/v1-0-3-to-v1-1-1" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/zh/v1.1/upgrade/v1-0-3-to-v1-1-1" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.1/upgrade/v1-0-3-to-v1-1-1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://U7QCSJFCWR-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Harvester" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.831dbdae.css">
<link rel="preload" href="/assets/js/runtime~main.693e3b15.js" as="script">
<link rel="preload" href="/assets/js/main.d1ef793e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/v1.1/">v1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dev/upgrade/v1-0-3-to-v1-1-1">v1.2-dev</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v1.1/upgrade/v1-0-3-to-v1-1-1">v1.1</a></li><li><a class="dropdown__link" href="/v1.0/">v1.0</a></li><li><a class="dropdown__link" href="/v0.3/">v0.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v1.1/upgrade/v1-0-3-to-v1-1-1" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/v1.1/upgrade/v1-0-3-to-v1-1-1" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v1.1/">Docs</a><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__blog">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://harvesterhci.io/kb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__kb">Knowledge Base<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/">Harvester Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/install/requirements">Installation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/airgap">Air Gapped Environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/v1.1/upgrade/automatic">Upgrade</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.1/upgrade/automatic">Upgrading Harvester</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.1/upgrade/v1-1-to-v1-1-2">Upgrade from v1.1.0/v1.1.1 to v1.1.2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v1.1/upgrade/v1-0-3-to-v1-1-1">Upgrade from v1.0.3/v1.1.0 to v1.1.1</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/v1.1/upgrade/previous-releases/v1-0-3-to-v1-1-0">Previous Releases</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.1/upgrade/troubleshooting">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/upload-image">Upload Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/host/">Host Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/vm/create-vm">VM Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/volume/create-volume">Volume Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/networking/clusternetwork">Networking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/logging/">Logging Audit Event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/monitoring/">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/advanced/settings">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/rancher/rancher-integration">Rancher Integration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/terraform/">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/troubleshooting/installation">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/faq">FAQ</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Upgrade</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Upgrade from v1.0.3/v1.1.0 to v1.1.1</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrade from v1.0.3/v1.1.0 to v1.1.1</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="general-information">General information<a href="#general-information" class="hash-link" aria-label="Direct link to General information" title="Direct link to General information">​</a></h2><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><ul><li>Starting from version v1.1.0, Harvester brings in the new <a href="https://github.com/harvester/harvester/issues/2236" target="_blank" rel="noopener noreferrer">VLAN enhancement</a> feature. Due to the implementation changes, all user VMs must shut down if the upgrade is from v1.0.3 to v1.1.1. Please stop the VMs before an upgrade. Upgrading from v1.1.0 to v1.1.1 doesn&#x27;t have this restriction (using live migration).</li></ul></div></div><p>Once there is an upgradable version, the Harvester GUI Dashboard page will show an upgrade button. For more details, please refer to <a href="/v1.1/upgrade/automatic#start-an-upgrade">start an upgrade</a>.</p><p>For the air-gap env upgrade, please refer to <a href="/v1.1/upgrade/automatic#prepare-an-air-gapped-upgrade">prepare an air-gapped upgrade</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="known-issues">Known issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known issues" title="Direct link to Known issues">​</a></h2><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-an-upgrade-is-stuck-when-pre-draining-a-node">1. An upgrade is stuck when pre-draining a node<a href="#1-an-upgrade-is-stuck-when-pre-draining-a-node" class="hash-link" aria-label="Direct link to 1. An upgrade is stuck when pre-draining a node" title="Direct link to 1. An upgrade is stuck when pre-draining a node">​</a></h3><p>Starting from v1.1.0, Harvester will wait for all volumes to become healthy (when node count &gt;= 3) before upgrading a node. Generally, users can check volumes&#x27; health if an upgrade is stuck in the &quot;pre-draining&quot; state.</p><p>Visit <a href="/v1.1/troubleshooting/harvester#access-embedded-rancher-and-longhorn-dashboards">&quot;Access Embedded Longhorn&quot;</a> to see how to access the embedded Longhorn GUI.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-an-upgrade-is-stuck-when-pre-draining-a-node-case-2">2. An upgrade is stuck when pre-draining a node (case 2)<a href="#2-an-upgrade-is-stuck-when-pre-draining-a-node-case-2" class="hash-link" aria-label="Direct link to 2. An upgrade is stuck when pre-draining a node (case 2)" title="Direct link to 2. An upgrade is stuck when pre-draining a node (case 2)">​</a></h3><p>An upgrade is stuck, as shown in the screenshot below:</p><p><img loading="lazy" src="/assets/images/3216-stuck-pre-drain-33d5537a9151085216d2cd275c92cf1f.png" width="1128" height="470" class="img_ev3q"></p><p>And the user can also observe multiple nodes have scheduling disabled.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME    STATUS                     ROLES                       AGE   VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node1   Ready                      control-plane,etcd,master   20d   v1.24.7+rke2r1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node2   Ready,SchedulingDisabled   control-plane,etcd,master   20d   v1.24.7+rke2r1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node3   Ready,SchedulingDisabled   control-plane,etcd,master   20d   v1.24.7+rke2r1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Related issue:<ul><li><a href="https://github.com/harvester/harvester/issues/3216" target="_blank" rel="noopener noreferrer">[BUG] Multiple nodes pre-drains in an upgrade</a></li></ul></li><li>Workaround:<ul><li><a href="https://github.com/harvester/harvester/issues/3216#issuecomment-1328607004" target="_blank" rel="noopener noreferrer">https://github.com/harvester/harvester/issues/3216#issuecomment-1328607004</a></li></ul></li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-an-upgrade-is-stuck-in-upgrading-the-first-node-job-was-active-longer-than-the-specified-deadline">3. An upgrade is stuck in upgrading the first node: Job was active longer than the specified deadline<a href="#3-an-upgrade-is-stuck-in-upgrading-the-first-node-job-was-active-longer-than-the-specified-deadline" class="hash-link" aria-label="Direct link to 3. An upgrade is stuck in upgrading the first node: Job was active longer than the specified deadline" title="Direct link to 3. An upgrade is stuck in upgrading the first node: Job was active longer than the specified deadline">​</a></h3><p>An upgrade fails, as shown in the screenshot below:</p><p><img loading="lazy" src="/assets/images/2894-deadline-8fbfd53960ef87f904f6a893a4a0bfcd.png" width="1140" height="918" class="img_ev3q"></p><ul><li>Related issue:<ul><li><a href="https://github.com/harvester/harvester/issues/2894" target="_blank" rel="noopener noreferrer">[BUG] Upgrade stuck in upgrading first node: Job was active longer than specified deadline</a></li></ul></li><li>Workaround:<ul><li><a href="https://github.com/harvester/harvester/issues/2894#issuecomment-1274069690" target="_blank" rel="noopener noreferrer">https://github.com/harvester/harvester/issues/2894#issuecomment-1274069690</a></li></ul></li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-an-upgrade-is-stuck-after-a-node-is-pre-drained">4. An upgrade is stuck after a node is pre-drained<a href="#4-an-upgrade-is-stuck-after-a-node-is-pre-drained" class="hash-link" aria-label="Direct link to 4. An upgrade is stuck after a node is pre-drained" title="Direct link to 4. An upgrade is stuck after a node is pre-drained">​</a></h3><p>An upgrade is stuck, as shown in the screenshot below:</p><p><img loading="lazy" src="/assets/images/3021-stuck-fe36d9af55b75fc0818de41c48ec670b.png" width="1136" height="504" class="img_ev3q"></p><ul><li>Related issue:<ul><li><a href="https://github.com/harvester/harvester/issues/3021" target="_blank" rel="noopener noreferrer">[BUG] Upgrade stop at upgrading node3 stage, stuck in Pre-drained status</a></li></ul></li><li>Workaround:<ul><li><a href="https://github.com/harvester/harvester/issues/3021#issuecomment-1288747614" target="_blank" rel="noopener noreferrer">https://github.com/harvester/harvester/issues/3021#issuecomment-1288747614</a></li></ul></li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-additional-certificates-disappear-after-an-upgrade">5. Additional certificates disappear after an upgrade<a href="#5-additional-certificates-disappear-after-an-upgrade" class="hash-link" aria-label="Direct link to 5. Additional certificates disappear after an upgrade" title="Direct link to 5. Additional certificates disappear after an upgrade">​</a></h3><p>After upgrading from v1.0.3, the file <code>/etc/pki/trust/anchors/additional-ca.pem</code> configured via the <a href="https://docs.harvesterhci.io/v1.1/advanced/settings#additional-ca" target="_blank" rel="noopener noreferrer"><code>additional-ca</code> setting</a> disappears.</p><p>To fix this, the user needs to access the Settings page (Harvester GUI, <code>Advanced -&gt; Settings</code>): </p><ul><li>Edit the <code>additional-ca</code> setting. Back up the current value first, clear the current value, and click <code>Save</code>.</li><li>Edit the <code>additional-ca</code> setting again. Input the certificates again and click <code>Save</code>.</li></ul><hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harvester/docs/edit/main/versioned_docs/version-v1.1/upgrade/v1-0-3-to-v1-1-1.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-04-25T04:04:14.000Z">Apr 25, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v1.1/upgrade/v1-1-to-v1-1-2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Upgrade from v1.1.0/v1.1.1 to v1.1.2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v1.1/upgrade/previous-releases/v1-0-3-to-v1-1-0"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Upgrade from v1.0.3 to v1.1.0</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general-information" class="table-of-contents__link toc-highlight">General information</a></li><li><a href="#known-issues" class="table-of-contents__link toc-highlight">Known issues</a><ul><li><a href="#1-an-upgrade-is-stuck-when-pre-draining-a-node" class="table-of-contents__link toc-highlight">1. An upgrade is stuck when pre-draining a node</a></li><li><a href="#2-an-upgrade-is-stuck-when-pre-draining-a-node-case-2" class="table-of-contents__link toc-highlight">2. An upgrade is stuck when pre-draining a node (case 2)</a></li><li><a href="#3-an-upgrade-is-stuck-in-upgrading-the-first-node-job-was-active-longer-than-the-specified-deadline" class="table-of-contents__link toc-highlight">3. An upgrade is stuck in upgrading the first node: Job was active longer than the specified deadline</a></li><li><a href="#4-an-upgrade-is-stuck-after-a-node-is-pre-drained" class="table-of-contents__link toc-highlight">4. An upgrade is stuck after a node is pre-drained</a></li><li><a href="#5-additional-certificates-disappear-after-an-upgrade" class="table-of-contents__link toc-highlight">5. Additional certificates disappear after an upgrade</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 harvesterhci.io</div></div></div></footer></div>
<script src="/assets/js/runtime~main.693e3b15.js"></script>
<script src="/assets/js/main.d1ef793e.js"></script>
</body>
</html>