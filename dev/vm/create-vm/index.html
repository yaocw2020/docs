<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-vm/create-vm">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Create a Virtual Machine | Harvester</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.harvesterhci.io/dev/vm/create-vm"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create a Virtual Machine | Harvester"><meta data-rh="true" name="description" content="How to Create a VM"><meta data-rh="true" property="og:description" content="How to Create a VM"><meta data-rh="true" name="keywords" content="Harvester,harvester,Rancher,rancher,Virtual Machine,virtual machine,Create a VM"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.harvesterhci.io/dev/vm/create-vm"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/dev/vm/create-vm" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/zh/dev/vm/create-vm" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/dev/vm/create-vm" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://U7QCSJFCWR-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Harvester" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.831dbdae.css">
<link rel="preload" href="/assets/js/runtime~main.693e3b15.js" as="script">
<link rel="preload" href="/assets/js/main.d1ef793e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/dev/">v1.2-dev</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/dev/vm/create-vm">v1.2-dev</a></li><li><a class="dropdown__link" href="/v1.1/vm/create-vm">v1.1</a></li><li><a class="dropdown__link" href="/v1.0/vm/create-vm">v1.0</a></li><li><a class="dropdown__link" href="/v0.3/vm/create-vm">v0.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/dev/vm/create-vm" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/dev/vm/create-vm" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/dev/">Docs</a><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__blog">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://harvesterhci.io/kb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__kb">Knowledge Base<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/">Harvester Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev/install/requirements">Installation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/airgap">Air Gapped Environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev/upgrade/automatic">Upgrade</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/upload-image">Upload Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/host/">Host Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/dev/vm/create-vm">VM Management</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dev/vm/create-vm">Create a Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/create-windows-vm">Create a Windows Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/edit-vm">Edit a Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/access-to-the-vm">Access to the Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/backup-restore">VM Backup, Snapshot &amp; Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/live-migration">Live Migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/hotplug-volume">Hot-Plug Volumes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/resource-overcommit">Resource Overcommit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/vm/clone-vm">Clone VM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev/volume/create-volume">Volume Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev/networking/clusternetwork">Networking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/logging/">Logging Audit Event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/monitoring/">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev/advanced/settings">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev/rancher/rancher-integration">Rancher Integration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/terraform/">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/dev/troubleshooting/installation">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dev/faq">FAQ</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <b>Harvester</b> <b>v1.2-dev</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/v1.1/vm/create-vm">latest version</a></b> (<!-- -->v1.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">VM Management</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Create a Virtual Machine</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.2-dev</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Create a Virtual Machine</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-create-a-vm">How to Create a VM<a href="#how-to-create-a-vm" class="hash-link" aria-label="Direct link to How to Create a VM" title="Direct link to How to Create a VM">​</a></h2><p>You can create one or more virtual machines from the <strong>Virtual Machines</strong> page.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Please refer to <a href="/dev/vm/create-windows-vm">this page</a> for creating Windows virtual machines.</p></div></div><ol><li>Choose the option to create either one or multiple VM instances.</li><li>Select the namespace of your VMs, only the <code>harvester-public</code> namespace is visible to all users.</li><li>The VM Name is a required field.</li><li>(Optional) VM template is optional, you can choose <code>iso-image</code>, <code>raw-image</code> or <code>windows-iso-image</code> template to speed up your VM instance creation.</li><li>Configure the virtual machine&#x27;s CPU and memory (see <a href="/dev/advanced/settings#overcommit-config">overcommit settings</a> if you want to over-provision).</li><li>Select SSH keys or upload new keys.</li><li>Select a custom VM image on the <strong>Volumes</strong> tab. The default disk will be the root disk. You can add more disks to the VM.</li><li>To configure networks, go to the <strong>Networks</strong> tab. <ol><li>The <strong>Management Network</strong> is added by default, you can remove it if the VLAN network is configured.</li><li>You can also add additional networks to the VMs using VLAN networks. You may configure the VLAN networks on <strong>Advanced &gt; Networks</strong> first.</li></ol></li><li>Advanced options such as run strategy, os type and cloud-init data are optional. You may configure these in the <strong>Advanced Options</strong> section when applicable.</li></ol><p><img loading="lazy" alt="create-vm" src="/assets/images/create-vm-aa84ec354ffbf83f6466fea5b2967537.png" width="5120" height="1740" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="volumes">Volumes<a href="#volumes" class="hash-link" aria-label="Direct link to Volumes" title="Direct link to Volumes">​</a></h2><p>You can add one or more additional volumes via the <code>Volumes</code> tab, by default the first disk will be the root disk, you can change the boot order by dragging and dropping volumes, or using the arrow buttons.</p><p>A disk can be made accessible via the following types:</p><table><thead><tr><th align="left">type</th><th align="left">description</th></tr></thead><tbody><tr><td align="left">disk</td><td align="left">A disk disk will expose the volume as an ordinary disk to the VM.</td></tr><tr><td align="left">cd-rom</td><td align="left">A cd-rom disk will expose the volume as a cd-rom drive to the VM. It is read-only by default.</td></tr></tbody></table><p>A volume&#x27;s <a href="/dev/advanced/storageclass">StorageClass</a> can be specified when adding a new empty volume; for other volumes (such as VM images), the <code>StorageClass</code> is defined during image creation.</p><p><img loading="lazy" alt="create-vm" src="/assets/images/create-vm-volumes-e8e820f4a3e9af9ff1ab1bb36e475a21.png" width="2560" height="1297" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-container-disk">Adding a container disk<a href="#adding-a-container-disk" class="hash-link" aria-label="Direct link to Adding a container disk" title="Direct link to Adding a container disk">​</a></h3><p>A container disk is an ephemeral storage volume that can be assigned to any number of VMs and provides the ability to store and distribute VM disks in the container image registry. A container disk is:</p><ul><li>An ideal tool if you want to replicate a large number of VM workloads or inject machine drivers that do not require persistent data. Ephemeral volumes are designed for VMs that need more storage but don&#x27;t care whether that data is stored persistently across VM restarts or only expect some read-only input data to be present in files, like configuration data or secret keys.</li><li>Not a good solution for any workload that requires persistent root disks across VM restarts.</li></ul><p>A container disk is added when creating a VM by providing a Docker image. When creating a VM, follow these steps:</p><ol><li>Go to the <strong>Volumes</strong> tab.</li><li>Select <strong>Add Container</strong>.
<img loading="lazy" alt="add-container-volume" src="/assets/images/add-container-volume-1-bcb4b56bad7da809cbb75796b6d0bf1a.png" width="1066" height="690" class="img_ev3q"></li><li>Enter a <strong>Name</strong> for the container disk.</li><li>Choose a disk <strong>Type</strong>.</li><li>Add a <strong>Docker Image</strong>.<ul><li>A disk image, with the format qcow2 or raw, must be placed into the <code>/disk</code> directory.</li><li>Raw and qcow2 formats are supported, but qcow2 is recommended in order to reduce the container image&#x27;s size. If you use an unsupported image format, the VM will get stuck in a <code>Running</code> state.</li><li>A container disk also allows you to store disk images in the <code>/disk</code> directory. An example of creating such a container image can be found <a href="https://kubevirt.io/user-guide/virtual_machines/disks_and_volumes/#containerdisk-workflow-example" target="_blank" rel="noopener noreferrer">here</a>. </li></ul></li><li>Choose a <strong>Bus</strong> type.<br><img loading="lazy" alt="add-container-volume" src="/assets/images/add-container-volume-2-a1a0a20e344b6ab16e7617f61ce6b141.png" width="775" height="340" class="img_ev3q"></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="networks">Networks<a href="#networks" class="hash-link" aria-label="Direct link to Networks" title="Direct link to Networks">​</a></h2><p>You can choose to add both the <code>management network</code> or <code>VLAN network</code> to your VM instances via the <code>Networks</code> tab, the <code>management network</code> is optional if you have the VLAN network configured.</p><p>Network interfaces are configured through the <code>Type</code> field. They describe the properties of the virtual interfaces seen inside the guest OS:</p><table><thead><tr><th align="left">type</th><th align="left">description</th></tr></thead><tbody><tr><td align="left">bridge</td><td align="left">Connect using a Linux bridge</td></tr><tr><td align="left">masquerade</td><td align="left">Connect using iptables rules to NAT the traffic</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="management-network">Management Network<a href="#management-network" class="hash-link" aria-label="Direct link to Management Network" title="Direct link to Management Network">​</a></h3><p>A management network represents the default VM eth0 interface configured by the cluster network solution that is present in each VM.</p><p>By default, VMs are accessible through the management network within the cluster nodes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secondary-network">Secondary Network<a href="#secondary-network" class="hash-link" aria-label="Direct link to Secondary Network" title="Direct link to Secondary Network">​</a></h3><p>It is also possible to connect VMs using additional networks with Harvester&#x27;s built-in <a href="/dev/networking/harvester-network">VLAN networks</a>.</p><p>In bridge VLAN, virtual machines are connected to the host network through a linux <code>bridge</code>. The network IPv4 address is delegated to the virtual machine via DHCPv4. The virtual machine should be configured to use DHCP to acquire IPv4 addresses.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-options">Advanced Options<a href="#advanced-options" class="hash-link" aria-label="Direct link to Advanced Options" title="Direct link to Advanced Options">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-strategy">Run Strategy<a href="#run-strategy" class="hash-link" aria-label="Direct link to Run Strategy" title="Direct link to Run Strategy">​</a></h3><p><em>Available as of v1.0.2</em></p><p>Prior to v1.0.2, Harvester used the <code>Running</code> (a boolean) field to determine if the VM instance should be running. However, a simple boolean value is not always sufficient to fully describe the user&#x27;s desired behavior. For example, in some cases the user wants to be able to shut down the instance from inside the virtual machine. If the <code>running</code> field is used, the VM will be restarted immediately.</p><p>In order to meet the scenario requirements of more users, the <code>RunStrategy</code> field is introduced. This is mutually exclusive with <code>Running</code> because their conditions overlap somewhat. There are currently four <code>RunStrategies</code> defined:</p><ul><li><p>Always: The VM instance will always exist. If VM instance crashes, a new one will be spawned. This is the same behavior as <code>Running: true</code>.</p></li><li><p>RerunOnFailure (default): If the previous instance failed in an error state, a VM instance will be respawned. If the guest is successfully stopped (e.g. shut down from inside the guest), it will not be recreated.</p></li><li><p>Manual: The presence or absence of a VM instance is controlled only by the <code>start/stop/restart</code> VirtualMachine actions.</p></li><li><p>Stop: There will be no VM instance. If the guest is already running, it will be stopped. This is the same behavior as <code>Running: false</code>.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-configuration">Cloud Configuration<a href="#cloud-configuration" class="hash-link" aria-label="Direct link to Cloud Configuration" title="Direct link to Cloud Configuration">​</a></h3><p>Harvester supports the ability to assign a startup script to a virtual machine instance which is executed automatically when the VM initializes.</p><p>These scripts are commonly used to automate injection of users and SSH keys into VMs in order to provide remote access to the machine. For example, a startup script can be used to inject credentials into a VM that allows an Ansible job running on a remote host to access and provision the VM.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-init">Cloud-init<a href="#cloud-init" class="hash-link" aria-label="Direct link to Cloud-init" title="Direct link to Cloud-init">​</a></h4><p><a href="https://cloudinit.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">Cloud-init</a> is a widely adopted project and the industry standard multi-distribution method for cross-platform cloud instance initialization. It is supported across all major cloud image provider like SUSE, Redhat, Ubuntu and etc., cloud-init has established itself as the defacto method of providing startup scripts to VMs.</p><p>Harvester supports injecting your custom cloud-init startup scripts into a VM instance through the use of an ephemeral disk. VMs with the cloud-init package installed will detect the ephemeral disk and execute custom user-data and network-data scripts at boot.</p><p>Example of password configuration for the default user:</p><div class="language-YAML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-YAML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#cloud-config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password: password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chpasswd: { expire: False }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh_pwauth: True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example of network-data configuration using DHCP:</p><div class="language-YAML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-YAML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - type: physical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      subnets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - type: dhcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - type: physical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: eth1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      subnets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - type: dhcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can also use the <code>Advanced &gt; Cloud Config Templates</code> feature to create a pre-defined cloud-init configuration template for the VM.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-qemu-guest-agent">Installing the QEMU guest agent<a href="#installing-the-qemu-guest-agent" class="hash-link" aria-label="Direct link to Installing the QEMU guest agent" title="Direct link to Installing the QEMU guest agent">​</a></h4><p>The QEMU guest agent is a daemon that runs on the virtual machine instance and passes information to the host about the VM, users, file systems, and secondary networks.</p><p><code>Install guest agent</code> checkbox is enabled by default when a new VM is created.</p><p><img loading="lazy" src="/assets/images/qga-90f05b81749ae9d4778770e240da5c55.png" width="2554" height="1267" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If your OS is openSUSE and the version is less than 15.3, please replace <code>qemu-guest-agent.service</code> with <code>qemu-ga.service</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tpm-device">TPM Device<a href="#tpm-device" class="hash-link" aria-label="Direct link to TPM Device" title="Direct link to TPM Device">​</a></h3><p><em>Available as of v1.2.0</em></p><p><a href="https://en.wikipedia.org/wiki/Trusted_Platform_Module" target="_blank" rel="noopener noreferrer">Trusted Platform Module (TPM)</a> is a cryptoprocessor that secures hardware using cryptographic keys.</p><p>According to <a href="https://learn.microsoft.com/en-us/windows/whats-new/windows-11-requirements" target="_blank" rel="noopener noreferrer">Windows 11 Requirements</a>, the TPM 2.0 device is a hard requirement of Windows 11.</p><p>In the Harvester UI, you can add an emulated TPM 2.0 device to a VM by checking the <code>Enable TPM</code> box in the <strong>Advanced Options</strong> tab.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Currently, only non-persistent vTPMs are supported, and their state is erased after each VM shutdown. Therefore, <a href="https://learn.microsoft.com/en-us/windows/security/information-protection/bitlocker/bitlocker-overview" target="_blank" rel="noopener noreferrer">Bitlocker</a> should not be enabled.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="one-time-boot-for-iso-installation">One-time Boot For ISO Installation<a href="#one-time-boot-for-iso-installation" class="hash-link" aria-label="Direct link to One-time Boot For ISO Installation" title="Direct link to One-time Boot For ISO Installation">​</a></h2><p>When creating a VM to boot from cd-rom, you can use the <strong>bootOrder</strong> option so that the OS can boot from cd-rom during image installation, and boot from the disk when the installation is complete without unmounting the cd-rom.</p><p>The following example describes how to install an ISO image using <a href="https://get.opensuse.org/leap/15.4/" target="_blank" rel="noopener noreferrer">openSUSE Leap 15.4</a>:</p><ol><li>Click <strong>Images</strong> in the left sidebar and download the openSUSE Leap 15.4 ISO image.</li><li>Click <strong>Virtual Machines</strong> in the left sidebar, then create a VM. You need to fill up those VM basic configurations.</li><li>Click the <strong>Volumes</strong> tab, In the <strong>Image</strong> field, select the image downloaded in step 1 and ensure <strong>Type</strong> is <code>cd-rom</code></li><li>Click <strong>Add Volume</strong> and select an existing <strong>StorageClass</strong>.</li><li>Drag <strong>Volume</strong> to the top of <strong>Image Volume</strong> as follows. In this way, the <strong>bootOrder</strong> of <strong>Volume</strong> will become <code>1</code>.</li></ol><p><img loading="lazy" alt="one-time-boot-create-vm-bootorder" src="/assets/images/one-time-boot-create-vm-bootorder-0ca6a67fa98d6173d8cea99e6580f843.png" width="4136" height="1570" class="img_ev3q"></p><ol start="6"><li>Click <strong>Create</strong>.</li><li>Open the VM web-vnc you just created and follow the instructions given by the installer.</li><li>After the installation is complete, reboot the VM  as instructed by the operating system (you can remove the installation media after booting the system).</li><li>After the VM reboots, it will automatically boot from the disk volume and start the operating system.</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harvester/docs/edit/main/docs/vm/create-vm.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-06-28T06:20:06.000Z">Jun 28, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/dev/host/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Host Management</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/dev/vm/create-windows-vm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create a Windows Virtual Machine</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-create-a-vm" class="table-of-contents__link toc-highlight">How to Create a VM</a></li><li><a href="#volumes" class="table-of-contents__link toc-highlight">Volumes</a><ul><li><a href="#adding-a-container-disk" class="table-of-contents__link toc-highlight">Adding a container disk</a></li></ul></li><li><a href="#networks" class="table-of-contents__link toc-highlight">Networks</a><ul><li><a href="#management-network" class="table-of-contents__link toc-highlight">Management Network</a></li><li><a href="#secondary-network" class="table-of-contents__link toc-highlight">Secondary Network</a></li></ul></li><li><a href="#advanced-options" class="table-of-contents__link toc-highlight">Advanced Options</a><ul><li><a href="#run-strategy" class="table-of-contents__link toc-highlight">Run Strategy</a></li><li><a href="#cloud-configuration" class="table-of-contents__link toc-highlight">Cloud Configuration</a></li><li><a href="#tpm-device" class="table-of-contents__link toc-highlight">TPM Device</a></li></ul></li><li><a href="#one-time-boot-for-iso-installation" class="table-of-contents__link toc-highlight">One-time Boot For ISO Installation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 harvesterhci.io</div></div></div></footer></div>
<script src="/assets/js/runtime~main.693e3b15.js"></script>
<script src="/assets/js/main.d1ef793e.js"></script>
</body>
</html>