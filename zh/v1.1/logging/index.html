<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v1.1 plugin-docs plugin-id-default docs-doc-id-logging/logging">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">日志审计事件 | Harvester</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.harvesterhci.io/zh/v1.1/logging/"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="v1.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.1"><meta data-rh="true" name="docsearch:version" content="v1.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.1"><meta data-rh="true" property="og:title" content="日志审计事件 | Harvester"><meta data-rh="true" name="description" content="从 v1.1.0 起可用"><meta data-rh="true" property="og:description" content="从 v1.1.0 起可用"><meta data-rh="true" name="keywords" content="Harvester,Logging,审计,事件"><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.harvesterhci.io/zh/v1.1/logging/"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.1/logging/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/zh/v1.1/logging/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.1/logging/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://U7QCSJFCWR-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Harvester" href="/zh/opensearch.xml"><link rel="stylesheet" href="/zh/assets/css/styles.9db99928.css">
<link rel="preload" href="/zh/assets/js/runtime~main.2eb6797d.js" as="script">
<link rel="preload" href="/zh/assets/js/main.901cadfa.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/v1.1/">v1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/dev/logging/">v1.2-dev</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/v1.1/logging/">v1.1</a></li><li><a class="dropdown__link" href="/zh/v1.0/">v1.0</a></li><li><a class="dropdown__link" href="/zh/v0.3/">v0.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/v1.1/logging/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/v1.1/logging/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">简体中文</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/zh/v1.1/">文档</a><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__blog">博文<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://harvesterhci.io/kb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__kb">知识库<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/">Harvester 介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/install/requirements">安装</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/airgap">离线环境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/upgrade/automatic">升级</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/authentication">身份验证</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/upload-image">上传镜像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/host/">主机管理</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/vm/create-vm">VM 管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/volume/create-volume">卷管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/networking/clusternetwork">网络</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/zh/v1.1/logging/">日志审计事件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/monitoring/">监控</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/advanced/settings">高级设置</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/rancher/rancher-integration">Rancher 集成</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/terraform/">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v1.1/troubleshooting/installation">故障排除</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v1.1/faq">常见问题</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">日志审计事件</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v1.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>日志审计事件</h1></header><p><em>从 v1.1.0 起可用</em></p><p>了解 <code>Harvester 集群</code>中正在发生/已经发生的事情是非常重要的。</p><p><code>Harvester</code> 在集群通电后会立即收集<code>集群运行日志</code>、kubernetes <code>审计</code>和<code>事件</code>日志，这有助于监控、记录、审计和排除故障。</p><p><code>Harvester</code> 支持将这些日志发送到各种日志服务器上。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>日志数据的大小与集群规模、工作负载等因素有关。<code>Harvester</code> 不使用持久存储在集群内存储日志数据。用户需要设置一个日志服务器来接收相应的日志。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="上层架构">上层架构<a href="#上层架构" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><a href="https://banzaicloud.com/docs/one-eye/logging-operator/" target="_blank" rel="noopener noreferrer">Banzai Cloud Logging Operator</a> 现在支持使用 <code>Harvester</code> 和 <code>Rancher</code> 作为内部日志解决方案。</p><p><img loading="lazy" src="/zh/assets/images/fluent-operator-03f1565c626ff9df7a98035c4d9eca93.png" width="2642" height="1372" class="img_ev3q"></p><p>在 Harvester 的实践中，<code>Logging</code>、<code>Audit</code> 和 <code>Event</code> 共享一个架构，<code>Logging</code> 是基础架构，而 <code>Audit</code> 和 <code>Event</code> 在它之上。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="logging">Logging<a href="#logging" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Harvester 日志基础架构支持将 Harvester 日志聚合到外部服务中，例如 <a href="https://www.graylog.org" target="_blank" rel="noopener noreferrer">Graylog</a>、<a href="https://www.elastic.co/elasticsearch/" target="_blank" rel="noopener noreferrer">Elasticsearch</a>、<a href="https://www.splunk.com/" target="_blank" rel="noopener noreferrer">Splunk</a>、<a href="https://grafana.com/oss/loki/" target="_blank" rel="noopener noreferrer">Grafana Loki</a> 等。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="收集的日志">收集的日志<a href="#收集的日志" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>收集的日志如下：</p><ul><li>所有集群 <code>Pod</code> 的日志</li><li>每个<code>节点</code>的内核日志</li><li>每个节点所选的 systemd 服务的日志<ul><li><code>rke2-server</code></li><li><code>rke2-agent</code></li><li><code>rancherd</code></li><li><code>rancher-system-agent</code></li><li><code>wicked</code></li><li><code>iscsid</code></li></ul></li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>用户可以配置和修改聚合日志的发送位置，以及一些基本的过滤条件。不支持更改收集哪些日志。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置日志资源">配置日志资源<a href="#配置日志资源" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Banzai Cloud Logging Operator 下面是 <a href="https://www.fluentd.org/" target="_blank" rel="noopener noreferrer"><code>fluentd</code> </a>和 <a href="https://fluentbit.io/" target="_blank" rel="noopener noreferrer"><code>fluent-bit</code></a>，它们分别处理日志路由和收集。
如果需要，你可以修改专用于这些组件的资源数量。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-ui">使用 UI<a href="#使用-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><ol><li>导航到 <code>Monitoring &amp; Logging &gt; Logging</code> 下的 <code>Configuration</code> 页面。</li><li>在 <code>Fluentbit</code> 选项卡下，更改资源请求和限制。</li><li>在 <code>Fluentd</code> 选项卡下，更改资源请求和限制。</li><li>点击屏幕右下方的 <code>Save</code>。</li></ol><p><img loading="lazy" src="/zh/assets/images/modify-logging-fluent-resources-5c54722eedbcc1c4018af4accd8b6348.png" width="1920" height="936" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-cli">使用 CLI<a href="#使用-cli" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>你还可以通过在命令行运行 <code>kubectl edit managedchart -nfleet-local rancher-logging</code> 来更改资源配置并修改相关文件。</p><p>如果你的 Harvester 版本 <code>&gt;= v1.1.0</code>，相关路径和默认值为：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># fluentbit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.limits.cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.limits.memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.requests.cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.requests.memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#fluentd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.limits.cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.limits.memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.requests.cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">values.fluentbit.resources.requests.memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50mi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置日志目标">配置日志目标<a href="#配置日志目标" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Logging 由 <a href="https://banzaicloud.com/docs/one-eye/logging-operator/" target="_blank" rel="noopener noreferrer">Banzai Cloud Logging Operator</a> 提供支持，因此由 <a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/flow/" target="_blank" rel="noopener noreferrer"><code>Flows</code>/<code>ClusterFlows</code></a> 和 <a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/output/" target="_blank" rel="noopener noreferrer"><code>Outputs</code>/<code>ClusterOutputs</code></a> 控制。你可以通过将这些 <code>CRD</code> 应用到 Harvester 集群来对日志进行路由和过滤。</p><p>将新的 <code>Ouptuts</code> 和 <code>Flows</code> 应用到集群时，Logging Operator 可能需要一些时间才能使应用生效。因此，请等待几分钟让日志开始流动。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="集群化-vs-命名空间化">集群化 VS 命名空间化<a href="#集群化-vs-命名空间化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>在路由日志时，你需要了解 <code>ClusterFlow</code>/<code>Flow</code> 和 <code>ClusterOutput</code>/<code>Output</code> 之间的区别。集群和非集群版本之间的主要区别在于非集群版本是命名空间化的。</p><p>这样做的最大意义，是 <code>Flows</code> 只能访问同一命名空间内的 <code>Outputs</code>，但仍然可以访问任何 <code>ClusterOutput</code>。</p><p>有关更多信息，请参阅文档：</p><ul><li><a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/flow/" target="_blank" rel="noopener noreferrer"><code>Flows</code>/<code>ClusterFlows</code></a></li><li><a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/output/" target="_blank" rel="noopener noreferrer"><code>Outputs</code>/<code>ClusterOutputs</code></a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-ui-1">使用 UI<a href="#使用-ui-1" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>UI 截图是 <code>Output</code> 和 <code>Flow</code>，它们的配置过程几乎与 ClusterOutput 和 ClusterFlow 相同。如果存在任何差异，我们都会在步骤中注明。</p></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="创建-outputs">创建 Outputs<a href="#创建-outputs" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h5><ol><li>选择创建新 <code>Output</code> 或 <code>ClusterOutput</code> 的选项。</li><li>如果创建 <code>Output</code>，请选择所需的命名空间。</li><li>为资源添加名称。</li><li>选择 Logging 类型。</li><li>选择 Logging 输出类型。</li></ol><p><img loading="lazy" src="/zh/assets/images/create-output-4780f942ae8568cb56cdca16e364b74e.png" width="1894" height="934" class="img_ev3q"></p><ol start="6"><li>如有必要，配置 Output Buffer。</li></ol><p><img loading="lazy" src="/zh/assets/images/create-output-buffer-62c1b78c41a02d731c76f6cbc4126340.png" width="1894" height="934" class="img_ev3q"></p><ol start="7"><li>添加标签或注释。</li></ol><p><img loading="lazy" src="/zh/assets/images/create-output-labels-and-annotations-5a91c9c7380fea1f056de1dcfbd8d192.png" width="1894" height="934" class="img_ev3q"></p><ol start="8"><li>完成后，单击右下角的 <code>Create</code>。</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>根据选择的输出（Splunk、Elasticsearch 等），在表单中指定其他字段。</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a href="#output" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h6><p><strong>Output</strong> 表单中显示的字段将根据所选的 <code>Output</code> 而不同，以便公开每个 <a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/plugins/outputs/" target="_blank" rel="noopener noreferrer">output plugin</a> 的字段。</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="output-buffer">Output Buffer<a href="#output-buffer" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h6><p><code>Output Buffer</code> 编辑器允许你描述期望的 output buffer 行为方式。你可以在<a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/plugins/outputs/buffer/" target="_blank" rel="noopener noreferrer">此处</a>找到 buffer 字段的文档。</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="标签和注释">标签和注释<a href="#标签和注释" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h6><p>你可以将标签和注释附加到创建的资源。</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="创建-flows">创建 Flows<a href="#创建-flows" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h5><ol><li>选择创建新 <code>Flow</code> 或 <code>ClusterFlow</code> 的选项。</li><li>如果创建 <code>Flow</code>，请选择所需的命名空间。</li><li>为资源添加名称。</li><li>选择要包括或排除日志的节点。</li></ol><p><img loading="lazy" src="/zh/assets/images/create-flow-matches-e84e72fc6237b7c3e958ee431be10d67.png" width="1894" height="934" class="img_ev3q"></p><ol start="5"><li>选择目标 <code>Outputs</code> 和 <code>ClusterOutputs</code>。</li></ol><p><img loading="lazy" src="/zh/assets/images/create-flow-outputs-62d17c11b0d45b348d1aa8025d340d25.png" width="1894" height="934" class="img_ev3q"></p><ol start="6"><li>如果需要，添加过滤器。</li></ol><p><img loading="lazy" src="/zh/assets/images/create-flow-filters-e6b4e332e511c03cad22f4183ee403d3.png" width="1892" height="935" class="img_ev3q"></p><ol start="7"><li>完成后，单击左下角的 <code>Create</code>。</li></ol><h6 class="anchor anchorWithStickyNavbar_LWe7" id="matches">Matches<a href="#matches" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h6><p>Matches 允许你过滤要包含在 <code>Flow</code> 中的日志。该表单仅允许你包含或排除节点日志，但如果需要，你可以通过选择 <code>Edit as YAML</code> 来添加资源支持的其他匹配规则。</p><p>有关 match 指令的更多信息，请参阅<a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/log-routing/" target="_blank" rel="noopener noreferrer">使用 match 指令路由日志</a>。</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="outputs">Outputs<a href="#outputs" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h6><p>Outputs 允许你选择一个或多个 <code>OutputRefs</code> 来发送聚合的日志。创建或编辑 <code>Flow</code>/<code>ClusterFlow</code> 时，用户至少需要选择一个 <code>Output</code>。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>必须至少有一个可以附加到 Flow 的现有 <code>ClusterOutput</code> 或 <code>Output</code>，否则你将无法创建/编辑 Flow。</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="过滤器">过滤器<a href="#过滤器" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h6><p>过滤器用于转换、处理和改变日志。你可以在文本编辑器中找到支持的过滤器的说明。要了解更多信息，你可以查看<a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/plugins/filters/" target="_blank" rel="noopener noreferrer">支持的过滤器</a>。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-cli-1">使用 CLI<a href="#使用-cli-1" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>通过命令行配置日志路由，你只需要定义相关资源的 YAML 文件即可：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># elasticsearch-logging.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fleet</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">example-label</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">example-annotation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">elasticsearch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;url</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">to</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fleet</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">match</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">select</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">globalOutputRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后应用它们：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f elasticsearch-logging.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="引用-secret">引用 Secret<a href="#引用-secret" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h5><p>Banzai Cloud 支持使用以下三种方式通过 YAML 值来指定 Secret 值。</p><p>最简单的是使用 <code>value</code> 键，它是所需 Secret 的简单字符串值。此方法应仅用于测试，切勿用于生产：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">aws_key_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;secretvalue&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>第二种方法是使用 <code>valueFrom</code>，它允许你通过 name/key 对来引用 Secret 的特定值：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">aws_key_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;kubernetes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;kubernetes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>一些插件需要读取文件，不能简单地从 Secret 中接收一个值（例如 CA 证书文件）。在这些情况下，你需要使用 <code>mountFrom</code>，它将 Secret 作为文件挂载到底层 <code>fluentd</code> Deployment 并将插件指向该文件。<code>valueFrom</code> 和 <code>mountFrom</code> 对象是相同的：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">tls_cert_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">mountFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;kubernetes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;kubernetes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如需更多信息，你可以在<a href="https://banzaicloud.com/docs/one-eye/logging-operator/configuration/plugins/outputs/secret/" target="_blank" rel="noopener noreferrer">此处</a>找到相关文档。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例-outputs">示例 <code>Outputs</code><a href="#示例-outputs" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="elasticsearch">Elasticsearch<a href="#elasticsearch" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>对于最简单的 Deployment，你可以使用 Docker 在本地系统上部署 Elasticsearch：</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --name elasticsearch -p 9200:9200 -p 9300:9300 -e xpack.security.enabled=false -e node.name=es01 -it docker.elastic.co/elasticsearch/elasticsearch:6.8.23</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>确保你已将 <code>vm.max_map_count</code> 设置为 &gt;= 262144，否则上述 Docker 命令将失败。Elasticsearch 服务器启动后，你可以为 <code>ClusterOutput</code> 和 <code>ClusterFlow</code> 创建 YAML 文件：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> elasticsearch-example.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: ClusterOutput</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: elasticsearch-example</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: cattle-logging-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  elasticsearch:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    host: 192.168.0.119</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    port: 9200</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    buffer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      timekey: 1m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      timekey_wait: 30s</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      timekey_use_utc: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: ClusterFlow</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: elasticsearch-example</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: cattle-logging-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  match:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - select: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  globalOutputRefs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - elasticsearch-example</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后应用文件：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f elasticsearch-example.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>允许 Logging Operator 应用资源一段时间后，你可以测试日志是否正在流动：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> localhost:9200/fluentd/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;took&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;timed_out&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;_shards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;total&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;successful&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;skipped&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;failed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;hits&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;total&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11603</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_score&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;hits&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fluentd&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;_type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fluentd&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;yWHr0oMBXcBggZRJgagY&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;_score&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;_source&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;stream&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;stderr&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;logtag&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;F&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;I1013 02:29:43.020384       1 csi_handler.go:248] Attaching </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">csi-974b4a6d2598d8a7a37b06d06557c428628875e077dabf8f32a6f3aa2750961d</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;kubernetes&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;pod_name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;csi-attacher-5d4cc8cfc8-hd4nb&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;namespace_name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;longhorn-system&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;pod_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c63c2014-9556-40ce-a8e1-22c55de12e70&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;labels&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;app&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;csi-attacher&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;pod-template-hash&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5d4cc8cfc8&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;annotations&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;cni.projectcalico.org/containerID&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;857df09c8ede7b8dee786a8c8788e8465cca58f0b4d973c448ed25bef62660cf&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;cni.projectcalico.org/podIP&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.52.0.15/32&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;cni.projectcalico.org/podIPs&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.52.0.15/32&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;k8s.v1.cni.cncf.io/network-status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[{</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">name</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">k8s-pod-network</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">,</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">ips</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: [</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">        </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">10.52.0.15</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    ],</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">default</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: true,</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">dns</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: {}</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">}]&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;k8s.v1.cni.cncf.io/networks-status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[{</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">name</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">k8s-pod-network</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">,</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">ips</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: [</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">        </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">10.52.0.15</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    ],</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">default</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: true,</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">    </span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">dns</span><span class="token string entity" style="color:#36acaa">\&quot;</span><span class="token string" style="color:#e3116c">: {}</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">}]&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&quot;kubernetes.io/psp&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;global-unrestricted-psp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;host&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;harvester-node-0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;container_name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;csi-attacher&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;docker_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;f10e4449492d4191376d3e84e39742bf077ff696acbb1e5f87c9cfbab434edae&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;container_hash&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sha256:03e115718d258479ce19feeb9635215f98e5ad1475667b4395b79e68caf129a6&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;container_image&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;docker.io/longhornio/csi-attacher:v3.4.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="graylog">Graylog<a href="#graylog" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>你可以按照<a href="https://github.com/w13915984028/harvester-develop-summary/blob/main/integrate-harvester-logging-with-log-servers.md#integrate-harvester-logging-with-graylog" target="_blank" rel="noopener noreferrer">此处</a>的说明通过 <a href="https://www.graylog.org/" target="_blank" rel="noopener noreferrer">Graylog</a> 部署和查看集群日志：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterFlow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;all-logs-gelf-hs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cattle-logging-system&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">globalOutputRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;example-gelf-hs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterOutput</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;example-gelf-hs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cattle-logging-system&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gelf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;192.168.122.159&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12202</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;udp&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="splunk">Splunk<a href="#splunk" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>你可以按照<a href="https://github.com/w13915984028/harvester-develop-summary/blob/main/test-log-event-audit-with-splunk.md" target="_blank" rel="noopener noreferrer">此处</a>的说明通过 <a href="https://www.splunk.com/" target="_blank" rel="noopener noreferrer">Splunk</a> 部署和查看集群日志：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterOutput</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">splunk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cattle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">splunkHec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hec_host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.122.101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hec_port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8088</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">insecure_ssl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">hec_token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HECTOKEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> splunk</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hec</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">buffer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">chunk_limit_size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 3MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">timekey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">timekey_wait</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterFlow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">splunk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cattle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">tag_normaliser</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">match</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">globalOutputRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">splunk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="loki">Loki<a href="#loki" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>你可以按照 <a href="https://github.com/joshmeranda/harvester/blob/logging/enhancements/20220525-system-logging.md" target="_blank" rel="noopener noreferrer">logging HEP</a> 中的说明通过 <a href="https://grafana.com/oss/loki/" target="_blank" rel="noopener noreferrer">Grafana Loki</a> 部署和查看集群日志：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterFlow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">loki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cattle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">match</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">select</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">globalOutputRefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">loki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterOutput</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">loki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cattle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">loki</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//loki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stack.cattle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system.svc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">extra_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">logOutput</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> harvester</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">loki</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="审计">审计<a href="#审计" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Harvester 收集 Kubernetes <code>audit</code>（审计）并能够将 <code>audit</code> 发送到各种类型的日志服务器。</p><p>指导 <code>kube-apiserver</code> 的策略文件在<a href="https://github.com/harvester/harvester-installer/blob/5991dcf6307aa5da79c5d6926566541f48105778/pkg/config/templates/rke2-92-harvester-kube-audit-policy.yaml" target="_blank" rel="noopener noreferrer">这里</a>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="审计定义">审计定义<a href="#审计定义" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在 <code>kubernetes</code>中，<a href="https://kubernetes.io/docs/tasks/debug/debug-cluster/audit/" target="_blank" rel="noopener noreferrer">审计（audit）</a>数据由 <code>kube-apiserver</code> 根据定义的策略生成。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Audit policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Audit policy defines rules about what events should be recorded and what data they should include. The audit policy object structure is defined in the audit.k8s.io API group. When an event is processed, it&#x27;s compared against the list of rules in order. The first matching rule sets the audit level of the event. The defined audit levels are:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">None - don&#x27;t log events that match this rule.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Metadata - log request metadata (requesting user, timestamp, resource, verb, etc.) but not request or response body.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Request - log event metadata and request body but not response body. This does not apply for non-resource requests.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RequestResponse - log event metadata, request and response bodies. This does not apply for non-resource requests.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="审计日志格式">审计日志格式<a href="#审计日志格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-中的审计日志格式">Kubernetes 中的审计日志格式<a href="#kubernetes-中的审计日志格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>Kubernetes apiserver 使用以下 JSON 格式将审计记录到本地文件中。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;kind&quot;:&quot;Event&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;apiVersion&quot;:&quot;audit.k8s.io/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;level&quot;:&quot;Metadata&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;auditID&quot;:&quot;13d0bf83-7249-417b-b386-d7fc7c024583&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;stage&quot;:&quot;RequestReceived&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;requestURI&quot;:&quot;/apis/flowcontrol.apiserver.k8s.io/v1beta2/prioritylevelconfigurations?fieldManager=api-priority-and-fairness-config-producer-v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;verb&quot;:&quot;create&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;user&quot;:{&quot;username&quot;:&quot;system:apiserver&quot;,&quot;uid&quot;:&quot;d311c1fe-2d96-4e54-a01b-5203936e1046&quot;,&quot;groups&quot;:[&quot;system:masters&quot;]},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;sourceIPs&quot;:[&quot;::1&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;userAgent&quot;:&quot;kube-apiserver/v1.24.7+rke2r1 (linux/amd64) kubernetes/e6f3597&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;objectRef&quot;:{&quot;resource&quot;:&quot;prioritylevelconfigurations&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;apiGroup&quot;:&quot;flowcontrol.apiserver.k8s.io&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;apiVersion&quot;:&quot;v1beta2&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;requestReceivedTimestamp&quot;:&quot;2022-10-19T18:55:07.244781Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;stageTimestamp&quot;:&quot;2022-10-19T18:55:07.244781Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="在发送到日志服务器之前的审计日志格式">在发送到日志服务器之前的审计日志格式<a href="#在发送到日志服务器之前的审计日志格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>Harvester 在将 <code>audit</code> 日志发送到日志服务器之前不会改变审计日志。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="审计日志-outputclusteroutput">审计日志 Output/ClusterOutput<a href="#审计日志-outputclusteroutput" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>要输出审计相关日志，<code>Output</code>/<code>ClusterOutput</code> 要求 <code>loggingRef</code> 的值为 <code>harvester-kube-audit-log-ref </code>。</p><p>通过 Harvester 仪表板进行配置时会自动添加该字段。</p><p>从 <code>Type</code> 下拉列表中选择 <code>Audit Only</code>。</p><p><img loading="lazy" src="/zh/assets/images/cluster-output-type-9ebabd3cc3bb3b555bf620becd1b65da.png" width="1466" height="644" class="img_ev3q"></p><p>通过 CLI 进行配置时，请手动添加该字段。</p><p>示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterOutput</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: &quot;harvester-audit-webhook&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: &quot;cattle-logging-system&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    endpoint: &quot;http://192.168.122.159:8096/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    open_timeout: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    format:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: &quot;json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    buffer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      chunk_limit_size: 3MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timekey: 2m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timekey_wait: 1m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  loggingRef: harvester-kube-audit-log-ref   # this reference is fixed and must be here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="审计日志-flowclusterflow">审计日志 Flow/ClusterFlow<a href="#审计日志-flowclusterflow" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>要路由审计相关日志，<code>Flow</code>/<code>ClusterFlow</code> 要求 <code>loggingRef</code> 的值为 <code>harvester-kube-audit-log-ref </code>。</p><p>通过 Harvester 仪表板进行配置时会自动添加该字段。</p><p>选择 <code>Audit</code> 类型。</p><p><img loading="lazy" src="/zh/assets/images/cluster-flow-type-c14d56c2a81e14c1afefd30f61a9780b.png" width="1234" height="558" class="img_ev3q"></p><p>通过 CLI 进行配置时，请手动添加该字段。</p><p>示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterFlow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: &quot;harvester-audit-webhook&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: &quot;cattle-logging-system&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  globalOutputRefs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;harvester-audit-webhook&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  loggingRef: harvester-kube-audit-log-ref  # this reference is fixed and must be here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="harvester">Harvester<a href="#harvester" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="事件">事件<a href="#事件" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Harvester 收集 Kubernetes <code>event</code>（事件）并能够将 <code>event</code> 发送到各种类型的日志服务器。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="事件定义">事件定义<a href="#事件定义" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Kubernetes <code>events</code> 是向你展示集群内正在发生的事情的对象，例如调度程序做出了哪些决定或 Pod 被驱逐出节点的原因。所有核心组件和扩展（Operator/控制器）都可以通过 API Server 创建事件。</p><p>事件与各种组件生成的日志消息没有直接关系，并且不受日志详细程度级别的影响。组件创建事件时通常会发出相应的日志消息。事件是 API Server 在短时间内（通常是一小时后）收集的垃圾，换言之，事件可用于了解正在发生的问题，但你必须收集它们才能调查以前的事件。</p><p>如果某事情没有按照预期工作，应用程序和基础设施操作会首先查看事件。如果故障是早期事件导致的，或者你需要在事后分析故障，则需要将事件保留更长的时间。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="事件日志格式">事件日志格式<a href="#事件日志格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-中的事件日志格式">Kubernetes 中的事件日志格式<a href="#kubernetes-中的事件日志格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p><code>kubernetes event</code> 示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;apiVersion&quot;: &quot;v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;count&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;eventTime&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;firstTimestamp&quot;: &quot;2022-08-24T11:17:35Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;involvedObject&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;apiVersion&quot;: &quot;kubevirt.io/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kind&quot;: &quot;VirtualMachineInstance&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;name&quot;: &quot;vm-ide-1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;namespace&quot;: &quot;default&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;resourceVersion&quot;: &quot;604601&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;uid&quot;: &quot;1bd4133f-5aa3-4eda-bd26-3193b255b480&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;kind&quot;: &quot;Event&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;lastTimestamp&quot;: &quot;2022-08-24T11:17:35Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;message&quot;: &quot;VirtualMachineInstance defined.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;metadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;creationTimestamp&quot;: &quot;2022-08-24T11:17:35Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;name&quot;: &quot;vm-ide-1.170e43cbdd833b62&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;namespace&quot;: &quot;default&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;resourceVersion&quot;: &quot;604626&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;uid&quot;: &quot;0114f4e7-1d4a-4201-b0e5-8cc8ede202f4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;reason&quot;: &quot;Created&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;reportingComponent&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;reportingInstance&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;source&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;component&quot;: &quot;virt-handler&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;host&quot;: &quot;harv1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;type&quot;: &quot;Normal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="发送到日志服务器之前的事件日志格式">发送到日志服务器之前的事件日志格式<a href="#发送到日志服务器之前的事件日志格式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>每个 <code>event log</code>  的格式为：<code>{&quot;stream&quot;:&quot;&quot;,&quot;logtag&quot;:&quot;F&quot;,&quot;message&quot;:&quot;&quot;,&quot;kubernetes&quot;:{&quot;&quot;}}</code>。<code>kubernetes event</code> 在 <code>message</code> 字段中。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;stream&quot;:&quot;stdout&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;logtag&quot;:&quot;F&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;message&quot;:&quot;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\\&quot;verb\\&quot;:\\&quot;ADDED\\&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\\&quot;event\\&quot;:{\\&quot;metadata\\&quot;:{\\&quot;name\\&quot;:\\&quot;vm-ide-1.170e446c3f890433\\&quot;,\\&quot;namespace\\&quot;:\\&quot;default\\&quot;,\\&quot;uid\\&quot;:\\&quot;0b44b6c7-b415-4034-95e5-a476fcec547f\\&quot;,\\&quot;resourceVersion\\&quot;:\\&quot;612482\\&quot;,\\&quot;creationTimestamp\\&quot;:\\&quot;2022-08-24T11:29:04Z\\&quot;,\\&quot;managedFields\\&quot;:[{\\&quot;manager\\&quot;:\\&quot;virt-controller\\&quot;,\\&quot;operation\\&quot;:\\&quot;Update\\&quot;,\\&quot;apiVersion\\&quot;:\\&quot;v1\\&quot;,\\&quot;time\\&quot;:\\&quot;2022-08-24T11:29:04Z\\&quot;}]},\\&quot;involvedObject\\&quot;:{\\&quot;kind\\&quot;:\\&quot;VirtualMachineInstance\\&quot;,\\&quot;namespace\\&quot;:\\&quot;default\\&quot;,\\&quot;name\\&quot;:\\&quot;vm-ide-1\\&quot;,\\&quot;uid\\&quot;:\\&quot;1bd4133f-5aa3-4eda-bd26-3193b255b480\\&quot;,\\&quot;apiVersion\\&quot;:\\&quot;kubevirt.io/v1\\&quot;,\\&quot;resourceVersion\\&quot;:\\&quot;612477\\&quot;},\\&quot;reason\\&quot;:\\&quot;SuccessfulDelete\\&quot;,\\&quot;message\\&quot;:\\&quot;Deleted PodDisruptionBudget kubevirt-disruption-budget-hmmgd\\&quot;,\\&quot;source\\&quot;:{\\&quot;component\\&quot;:\\&quot;disruptionbudget-controller\\&quot;},\\&quot;firstTimestamp\\&quot;:\\&quot;2022-08-24T11:29:04Z\\&quot;,\\&quot;lastTimestamp\\&quot;:\\&quot;2022-08-24T11:29:04Z\\&quot;,\\&quot;count\\&quot;:1,\\&quot;type\\&quot;:\\&quot;Normal\\&quot;,\\&quot;eventTime\\&quot;:null,\\&quot;reportingComponent\\&quot;:\\&quot;\\&quot;,\\&quot;reportingInstance\\&quot;:\\&quot;\\&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;kubernetes&quot;:{&quot;pod_name&quot;:&quot;harvester-default-event-tailer-0&quot;,&quot;namespace_name&quot;:&quot;cattle-logging-system&quot;,&quot;pod_id&quot;:&quot;d3453153-58c9-456e-b3c3-d91242580df3&quot;,&quot;labels&quot;:{&quot;app.kubernetes.io/instance&quot;:&quot;harvester-default-event-tailer&quot;,&quot;app.kubernetes.io/name&quot;:&quot;event-tailer&quot;,&quot;controller-revision-hash&quot;:&quot;harvester-default-event-tailer-747b9d4489&quot;,&quot;statefulset.kubernetes.io/pod-name&quot;:&quot;harvester-default-event-tailer-0&quot;},&quot;annotations&quot;:{&quot;cni.projectcalico.org/containerID&quot;:&quot;aa72487922ceb4420ebdefb14a81f0d53029b3aec46ed71a8875ef288cde4103&quot;,&quot;cni.projectcalico.org/podIP&quot;:&quot;10.52.0.178/32&quot;,&quot;cni.projectcalico.org/podIPs&quot;:&quot;10.52.0.178/32&quot;,&quot;k8s.v1.cni.cncf.io/network-status&quot;:&quot;[{\\n    \\&quot;name\\&quot;: \\&quot;k8s-pod-network\\&quot;,\\n    \\&quot;ips\\&quot;: [\\n        \\&quot;10.52.0.178\\&quot;\\n    ],\\n    \\&quot;default\\&quot;: true,\\n    \\&quot;dns\\&quot;: {}\\n}]&quot;,&quot;k8s.v1.cni.cncf.io/networks-status&quot;:&quot;[{\\n    \\&quot;name\\&quot;: \\&quot;k8s-pod-network\\&quot;,\\n    \\&quot;ips\\&quot;: [\\n        \\&quot;10.52.0.178\\&quot;\\n    ],\\n    \\&quot;default\\&quot;: true,\\n    \\&quot;dns\\&quot;: {}\\n}]&quot;,&quot;kubernetes.io/psp&quot;:&quot;global-unrestricted-psp&quot;},&quot;host&quot;:&quot;harv1&quot;,&quot;container_name&quot;:&quot;harvester-default-event-tailer-0&quot;,&quot;docker_id&quot;:&quot;455064de50cc4f66e3dd46c074a1e4e6cfd9139cb74d40f5ba00b4e3e2a7ab2d&quot;,&quot;container_hash&quot;:&quot;docker.io/banzaicloud/eventrouter@sha256:6353d3f961a368d95583758fa05e8f4c0801881c39ed695bd4e8283d373a4262&quot;,&quot;container_image&quot;:&quot;docker.io/banzaicloud/eventrouter:v0.1.0&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="事件日志-outputclusteroutput">事件日志 Output/ClusterOutput<a href="#事件日志-outputclusteroutput" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>事件与 <code>Logging</code> 共享 <code>Output</code>/<code>ClusterOutput</code>。</p><p>从 <code>Type</code> 下拉列表中选择 <code>Logging/Event</code>。</p><p><img loading="lazy" src="/zh/assets/images/cluster-output-type-9ebabd3cc3bb3b555bf620becd1b65da.png" width="1466" height="644" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="事件日志-flowclusterflow">事件日志 Flow/ClusterFlow<a href="#事件日志-flowclusterflow" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>与普通的 Logging <code>Flow</code>/<code>ClusterFlow</code> 相比，<code>Event</code> 相关的 <code>Flow</code>/<code>ClusterFlow</code> 多了一个匹配字段，其值为 <code>event-tailer</code>。</p><p>通过 Harvester 仪表板进行配置时会自动添加该字段。</p><p>从 <code>Type</code> 下拉列表中选择 <code>Event</code>。</p><p><img loading="lazy" src="/zh/assets/images/cluster-flow-type-c14d56c2a81e14c1afefd30f61a9780b.png" width="1234" height="558" class="img_ev3q"></p><p>通过 CLI 进行配置时，请手动添加该字段。</p><p>示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: logging.banzaicloud.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterFlow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: harvester-event-webhook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: cattle-logging-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - tag_normaliser: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  match:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - select:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app.kubernetes.io/name: event-tailer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  globalOutputRefs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - harvester-event-webhook</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harvester/docs/edit/main/versioned_docs/version-v1.1/logging/logging.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2022-12-29T06:51:06.000Z">2022年12月29日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/v1.1/networking/deep-dive"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Harvester 网络深度解释</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/v1.1/monitoring/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">监控</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#上层架构" class="table-of-contents__link toc-highlight">上层架构</a></li><li><a href="#logging" class="table-of-contents__link toc-highlight">Logging</a><ul><li><a href="#收集的日志" class="table-of-contents__link toc-highlight">收集的日志</a></li><li><a href="#配置日志资源" class="table-of-contents__link toc-highlight">配置日志资源</a></li><li><a href="#配置日志目标" class="table-of-contents__link toc-highlight">配置日志目标</a></li><li><a href="#示例-outputs" class="table-of-contents__link toc-highlight">示例 <code>Outputs</code></a></li></ul></li><li><a href="#审计" class="table-of-contents__link toc-highlight">审计</a><ul><li><a href="#审计定义" class="table-of-contents__link toc-highlight">审计定义</a></li><li><a href="#审计日志格式" class="table-of-contents__link toc-highlight">审计日志格式</a></li><li><a href="#审计日志-outputclusteroutput" class="table-of-contents__link toc-highlight">审计日志 Output/ClusterOutput</a></li><li><a href="#审计日志-flowclusterflow" class="table-of-contents__link toc-highlight">审计日志 Flow/ClusterFlow</a></li><li><a href="#harvester" class="table-of-contents__link toc-highlight">Harvester</a></li></ul></li><li><a href="#事件" class="table-of-contents__link toc-highlight">事件</a><ul><li><a href="#事件定义" class="table-of-contents__link toc-highlight">事件定义</a></li><li><a href="#事件日志格式" class="table-of-contents__link toc-highlight">事件日志格式</a></li><li><a href="#事件日志-outputclusteroutput" class="table-of-contents__link toc-highlight">事件日志 Output/ClusterOutput</a></li><li><a href="#事件日志-flowclusterflow" class="table-of-contents__link toc-highlight">事件日志 Flow/ClusterFlow</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 harvesterhci.io</div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.2eb6797d.js"></script>
<script src="/zh/assets/js/main.901cadfa.js"></script>
</body>
</html>