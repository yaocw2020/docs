<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v0.3 plugin-docs plugin-id-default docs-doc-id-networking/harvester-network">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Harvester Network | Harvester</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.harvesterhci.io/v0.3/networking/harvester-network"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v0.3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v0.3"><meta data-rh="true" name="docsearch:version" content="v0.3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v0.3"><meta data-rh="true" property="og:title" content="Harvester Network | Harvester"><meta data-rh="true" name="description" content="Harvester is built on top of Kubernetes and leverages its built-in CNI mechanism to provide the interface between network providers and its VM networks."><meta data-rh="true" property="og:description" content="Harvester is built on top of Kubernetes and leverages its built-in CNI mechanism to provide the interface between network providers and its VM networks."><meta data-rh="true" name="keywords" content="Harvester,harvester,Rancher,rancher,Harvester Upgrade"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.harvesterhci.io/v0.3/networking/harvester-network"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v0.3/networking/harvester-network" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/zh/v0.3/networking/harvester-network" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v0.3/networking/harvester-network" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://U7QCSJFCWR-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Harvester" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.831dbdae.css">
<link rel="preload" href="/assets/js/runtime~main.693e3b15.js" as="script">
<link rel="preload" href="/assets/js/main.d1ef793e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/v0.3/">v0.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dev/networking/harvester-network">v1.2-dev</a></li><li><a class="dropdown__link" href="/v1.1/networking/harvester-network">v1.1</a></li><li><a class="dropdown__link" href="/v1.0/networking/harvester-network">v1.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v0.3/networking/harvester-network">v0.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v0.3/networking/harvester-network" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/v0.3/networking/harvester-network" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v0.3/">Docs</a><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__blog">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://harvesterhci.io/kb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__kb">Knowledge Base<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/">Harvester Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.3/install/iso-install">Installation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/upgrade">Upgrading Harvester</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/upload-image">Upload Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/host/">Host Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.3/vm/create-vm">VM Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/v0.3/networking/harvester-network">Networking</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v0.3/networking/harvester-network">Harvester Network</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/monitoring/">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.3/rancher/rancher-integration">Rancher Integration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/terraform/">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v0.3/troubleshooting/installation">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.3/faq">FAQ</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div><div><b>Harvester</b> <b>v0.3</b> is EOL and this documentation is no longer actively maintained. For more details, refer to the <a href="https://www.suse.com/suse-harvester/support-matrix/all-supported-versions/"><b>SUSE support matrix</b></a>.</div></div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/v1.1/networking/harvester-network">latest version</a></b> (<!-- -->v1.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Networking</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Harvester Network</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v0.3</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Harvester Network</h1></header><p>Harvester is built on top of <a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes</a> and leverages its built-in <a href="https://github.com/containernetworking/cni" target="_blank" rel="noopener noreferrer">CNI</a> mechanism to provide the interface between network providers and its VM networks. </p><p>We have implemented the Harvester VLAN network based on the <a href="https://www.cni.dev/plugins/current/main/bridge/" target="_blank" rel="noopener noreferrer">bridge</a> CNI to provide a pure L2-mode network, that would bridge your VMs to the host network interface and can be connected using the physical switch for both internal and external network communication. </p><p>Moreover, the Harvester UI integrates the <a href="https://github.com/harvester/network-controller-harvester" target="_blank" rel="noopener noreferrer">harvester-network-controller</a> to provide user-friendly VLAN network configurations, e.g., to create and manage VLAN networks or to add a VLAN network to the VM. </p><p>Currently, Harvester supports two types of networks:</p><ul><li><a href="#management-network">Management network</a></li><li><a href="#vlan-network">VLAN</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="management-network">Management Network<a href="#management-network" class="hash-link" aria-label="Direct link to Management Network" title="Direct link to Management Network">​</a></h2><p>Harvester uses <a href="https://github.com/flannel-io/flannel" target="_blank" rel="noopener noreferrer">flannel</a> CNI as its default management network. It is a built-in network that can be used directly from the cluster. However, the management network IP is not persisted and will be changed after a VM reboot.</p><p>Additionally, users can leverage the Kubernetes <a href="https://kubevirt.io/user-guide/virtual_machines/service_objects/" target="_blank" rel="noopener noreferrer">service object</a> to create a stable IP for your VMs with the management network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vlan-network">VLAN Network<a href="#vlan-network" class="hash-link" aria-label="Direct link to VLAN Network" title="Direct link to VLAN Network">​</a></h2><p>The <a href="https://github.com/harvester/harvester-network-controller" target="_blank" rel="noopener noreferrer">Harvester network-controller</a> leverages the <a href="https://github.com/k8snetworkplumbingwg/multus-cni" target="_blank" rel="noopener noreferrer">multus</a> and <a href="https://www.cni.dev/plugins/current/main/bridge/" target="_blank" rel="noopener noreferrer">bridge</a> CNI plugins to implement its customized L2 bridge VLAN network. It helps to connect your VMs to the host network interface and can be accessed from internal and external networks using the physical switch.</p><p>The below diagram illustrates how the VLAN network works in Harvester.</p><p>  <img loading="lazy" src="/assets/images/vlan-case-696fde4079834afd0a18b00e0c8e164c.png" width="1578" height="1214" class="img_ev3q"></p><ul><li>The Harvester network-controller creates a bridge for each node and a pair of veth for each VM to implement its VLAN network. The bridge acts as a switch to forward the network traffic from or to VMs and the veth pair is like the connected ports between VMs and the switch.</li><li>VMs within the same VLAN can communicate with each other, while the VMs from different VLANs can&#x27;t.</li><li>The external switch ports connected to the hosts or other devices (such as the DHCP server) should be set as trunk or hybrid type and permit the specified VLANs.</li><li>Users can use VLAN with <code>PVID</code> (default 1) to communicate with any normal untagged traffic.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-default-vlan-network">Enabling Default VLAN Network<a href="#enabling-default-vlan-network" class="hash-link" aria-label="Direct link to Enabling Default VLAN Network" title="Direct link to Enabling Default VLAN Network">​</a></h3><p>Users can enable the VLAN network via <strong>Setting &gt; VLAN</strong> and selecting a common physical NIC for the nodes as the default VLAN config .</p><p>It is recommended to choose a separate NIC for the VLAN other than the one used for the management network (i.e., <code>harvester-mgmt</code>) for better network performance and isolation.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><ul><li>Modifying the default VLAN network setting will not update the existing configured host network.</li><li>Harvester VLAN network supports bond interfaces, currently it can only be created automatically via <a href="/v0.3/install/harvester-configuration#example-11">PEX Boot Configuration</a>. Users may also login to the node and create it manually.</li></ul></div></div><p>  <img loading="lazy" src="/assets/images/enable-vlan-85f1f8cdccba9bf144068fc1e6797148.png" width="944" height="463" class="img_ev3q"></p><p>Optional: Users can customize each node&#x27;s VLAN network via the <strong>HOST &gt; Network</strong> tab.</p><p>  <img loading="lazy" src="/assets/images/node-network-configuration-84f694992a0fa13d35816166ed4dac78.png" width="943" height="551" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-vlan-network">Create a VLAN Network<a href="#create-a-vlan-network" class="hash-link" aria-label="Direct link to Create a VLAN Network" title="Direct link to Create a VLAN Network">​</a></h3><p>A new VLAN network can be created via the <strong>Advanced &gt; Networks</strong> page and clicking the <strong>Create</strong> button.</p><ul><li><p>Specify the name and VLAN ID that you want to create for the VLAN network.</p><p><img loading="lazy" alt="create-vlan-network.png" src="/assets/images/create-network-40766e0128609173170273919f5be4b9.png" width="946" height="572" class="img_ev3q"></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-vm-with-vlan-network">Create a VM with VLAN Network<a href="#create-a-vm-with-vlan-network" class="hash-link" aria-label="Direct link to Create a VM with VLAN Network" title="Direct link to Create a VM with VLAN Network">​</a></h3><p>Users can now create a new VM using the above configured VLAN network,</p><ul><li>Click the <strong>Create</strong> button on the <strong>Virtual Machines</strong> page.</li><li>Specify the required parameters and click the <strong>Networks</strong> tab.</li><li>Either configure the default network to be a VLAN network or select an additional network to add.</li></ul><p><img loading="lazy" src="/assets/images/vm-network-configuration-0605db12204921a94f4cfc0842b97d59.png" width="940" height="886" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><ul><li>Only the first NIC will be enabled by default. Users can either choose to use a management network or a VLAN network. </li><li>You will need to select the <code>Install guest agent</code> option in the <strong>Advanced Options</strong> tab to get the VLAN network IP address from the Harvester UI.</li></ul></div></div><ul><li>Users can choose to add one or multiple network interface cards. Additional network interface card can be enabled by default via setting the cloud-init network data. E.g.,</li></ul><div class="language-YAML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-YAML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">version: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - type: physical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: enp1s0 # name is varies upon OS image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subnets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - type: dhcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - type: physical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: enp2s0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subnets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - type: DHCP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more detailed configs you may refer to the <a href="https://cloudinit.readthedocs.io/en/latest/reference/network-config-format-v2.html" target="_blank" rel="noopener noreferrer">cloud-init network configs</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-dhcp-servers-on-networks">Configure DHCP servers on Networks<a href="#configure-dhcp-servers-on-networks" class="hash-link" aria-label="Direct link to Configure DHCP servers on Networks" title="Direct link to Configure DHCP servers on Networks">​</a></h3><p>By default, the Harvester VLAN network would expect your router to provide a DHCP server that VMs can request and assign IP addresses automatically.</p><p>If you are running Harvester in a virtual environment that does not contain a DHCP server, you may consider deploying a DHCP server manually in a node or using a containerized method. Refer to <a href="https://github.com/harvester/harvester/issues/947" target="_blank" rel="noopener noreferrer">this issue</a> as an example.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harvester/docs/edit/main/versioned_docs/version-v0.3/networking/harvester-network.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-06-19T07:15:19.000Z">Jun 19, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v0.3/vm/hotplug-volume"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hot-Plug Volumes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v0.3/monitoring/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Monitoring</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#management-network" class="table-of-contents__link toc-highlight">Management Network</a></li><li><a href="#vlan-network" class="table-of-contents__link toc-highlight">VLAN Network</a><ul><li><a href="#enabling-default-vlan-network" class="table-of-contents__link toc-highlight">Enabling Default VLAN Network</a></li><li><a href="#create-a-vlan-network" class="table-of-contents__link toc-highlight">Create a VLAN Network</a></li><li><a href="#create-a-vm-with-vlan-network" class="table-of-contents__link toc-highlight">Create a VM with VLAN Network</a></li><li><a href="#configure-dhcp-servers-on-networks" class="table-of-contents__link toc-highlight">Configure DHCP servers on Networks</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 harvesterhci.io</div></div></div></footer></div>
<script src="/assets/js/runtime~main.693e3b15.js"></script>
<script src="/assets/js/main.d1ef793e.js"></script>
</body>
</html>